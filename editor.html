<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä —Ä–æ–∑–∫–ª–∞–¥—É</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="./editor.css">
</head>
<body>

    <header>
        <h1>üß© –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä</h1>
        <div>
            <button id="themeToggle" title="–ó–º—ñ–Ω–∏—Ç–∏ —Ç–µ–º—É">üåó</button>
            <a href="./index.html" class="nav-link">–í–∏—Ö—ñ–¥</a>
        </div>
    </header>

    <main class="editor-container">
        
        <div id="startScreen" class="screen active">
            <h2>–Ø–∫ –≤–∏ —Ö–æ—á–µ—Ç–µ —Ä–µ–¥–∞–≥—É–≤–∞—Ç–∏?</h2>
            <div class="mode-buttons">
                <button id="btnClassicEdit" class="big-btn secondary">üìù –ö–ª–∞—Å–∏—á–Ω–∏–π —Å–ø–∏—Å–æ–∫</button>
                <button id="btnVisualEdit" class="big-btn primary">‚ú® –°—Ç–≤–æ—Ä–∏—Ç–∏ –∑ –Ω—É–ª—è (–í—ñ–∑—É–∞–ª—å–Ω–æ)</button>
            </div>
            <div class="controls" style="justify-content: center; margin-top: 20px;">
                 <input type="file" id="loadFileInput" accept=".json" style="display: none;">
                 <button id="loadFileBtn" class="load-file-btn">–ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ —Ñ–∞–π–ª</button>
            </div>
        </div>

        <div id="classicEditor" class="screen" style="display: none;">
            <div class="controls">
                <button id="backToStartBtn" class="load-btn">‚¨Ö –ù–∞–∑–∞–¥</button>
                <button id="saveBtn" class="save-btn">–ó–±–µ—Ä–µ–≥—Ç–∏</button>
            </div>
            <div id="classicFormContainer"></div>
        </div>

        <div id="visualWizard" class="screen" style="display: none;">
            
            <div id="step1" class="wizard-step active">
                <h3>–ö—Ä–æ–∫ 1: –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Å—ñ—Ç–∫–∏</h3>
                <div class="form-grid">
                    <label>–¢–∏–ø —Ç–∏–∂–Ω—è (–≤ —É–Ω—ñ–≤–µ—Ä—Å–∏—Ç–µ—Ç—ñ):
                        <select id="wizWeekType">
                            <option value="numden">–ß–∏—Å–µ–ª—å–Ω–∏–∫ / –ó–Ω–∞–º–µ–Ω–Ω–∏–∫</option>
                            <option value="none">–ë–µ–∑ –ø–æ–¥—ñ–ª—É</option>
                        </select>
                    </label>
                    <label>–Ø–∫–∏–π –ó–ê–†–ê–ó —Ç–∏–∂–¥–µ–Ω—å?
                        <select id="wizCurrentWeek">
                            <option value="num">–ß–∏—Å–µ–ª—å–Ω–∏–∫</option>
                            <option value="den">–ó–Ω–∞–º–µ–Ω–Ω–∏–∫</option>
                        </select>
                    </label>
                    <label>–ü–∞—Ä –Ω–∞ –¥–µ–Ω—å:
                        <input type="number" id="wizLessonCount" value="5" min="1" max="10">
                    </label>
                </div>
                <div id="wizTimeSlots" class="time-slots-grid"></div>
                <button class="next-btn" onclick="wizardNext(2)">–î–∞–ª—ñ (–ü—Ä–µ–¥–º–µ—Ç–∏) ‚û°</button>
            </div>

            <div id="step2" class="wizard-step">
                <div class="step-header">
                    <button class="prev-btn icon-btn" onclick="wizardNext(1)">‚¨Ö</button>
                    <h3>–ö—Ä–æ–∫ 2: –°—Ç–≤–æ—Ä—ñ—Ç—å "–ü–∞–∑–ª–∏" (–ü—Ä–µ–¥–º–µ—Ç–∏)</h3>
                    <button class="next-btn" onclick="wizardNext(3)">–î–∞–ª—ñ (–°—Ç—Ä—É–∫—Ç—É—Ä–∞) ‚û°</button>
                </div>
                
                <div class="db-creator-smart">
                    <div class="smart-card-form">
                        <h4>–ù–æ–≤–∏–π –ø—Ä–µ–¥–º–µ—Ç</h4>
                        <input type="text" id="smartSubjectName" placeholder="–ù–∞–∑–≤–∞ (–Ω–∞–ø—Ä. –§—ñ–∑–∏–∫–∞)">
                        
                        <div class="type-toggles">
                            <span>–Ñ —Ç–∏–ø–∏:</span>
                            <label><input type="checkbox" id="smartHasLec"> –õ–µ–∫</label>
                            <label><input type="checkbox" id="smartHasPrac"> –ü—Ä–∞–∫</label>
                            <label><input type="checkbox" id="smartHasLab"> –õ–∞–±</label>
                        </div>

                        <div class="teacher-room-label">–ê—É–¥–∏—Ç–æ—Ä—ñ—ó —Ç–∞ –í–∏–∫–ª–∞–¥–∞—á—ñ:</div>
                        <div class="teacher-room-list" id="smartDetailsList">
                            </div>
                        <button id="addDetailRowBtn" class="small-btn dashed">+ –î–æ–¥. –∞—É–¥–∏—Ç–æ—Ä—ñ—é</button>

                        <button id="addSmartSubjectBtn" class="add-main-btn">+ –î–æ–¥–∞—Ç–∏ / –û–Ω–æ–≤–∏—Ç–∏ –ø—Ä–µ–¥–º–µ—Ç</button>
                    </div>

                    <div class="smart-list-container">
                        <h4 style="margin-top: 0;">–í–∞—à—ñ –ø—Ä–µ–¥–º–µ—Ç–∏ (–ü–æ–¥–≤—ñ–π–Ω–∏–π –∫–ª—ñ–∫ –¥–ª—è –∑–º—ñ–Ω–∏):</h4>
                        <div id="smartSubjectList" class="items-list"></div>
                    </div>
                </div>
            </div>

            <div id="step3" class="wizard-step full-width-col">
                <div class="step-header-slim">
                    <button class="prev-btn icon-btn" onclick="wizardNext(2)">‚¨Ö –ù–∞–∑–∞–¥</button>
                    <h3>–ö—Ä–æ–∫ 3: –ù–∞–ª–∞—à—Ç—É–π—Ç–µ –∫–ª—ñ—Ç–∏–Ω–∫–∏ (–ù–∞—Ç–∏—Å–Ω—ñ—Ç—å –Ω–∞ –∫–ª—ñ—Ç–∏–Ω–∫—É)</h3>
                    <button class="next-btn" onclick="wizardNext(4)">–î–∞–ª—ñ (–ù–∞–ø–æ–≤–Ω–µ–Ω–Ω—è) ‚û°</button>
                </div>
                <div class="structure-editor-container">
                    <div id="structureGrid" class="visual-feed"></div>
                </div>
            </div>

            <div id="step4" class="wizard-step full-width">
                <div class="workspace-layout">
                    
                    <div class="puzzle-sidebar">
                        <h3>üß© –ü—Ä–µ–¥–º–µ—Ç–∏</h3>
                        <div id="puzzleContainer" class="puzzle-container"></div>
                        <div class="sidebar-buttons">
                            <button class="prev-btn" onclick="wizardNext(3)">‚¨Ö –ù–∞–∑–∞–¥</button>
                            <button id="finishVisualBtn" class="save-btn big">üíæ –ó–±–µ—Ä–µ–≥—Ç–∏</button>
                        </div>
                    </div>

                    <div class="schedule-scroll-container">
                        <div id="visualGridFill" class="visual-feed"></div>
                    </div>

                </div>
            </div>

        </div>

    </main>

    <div id="timeModal" class="modal">
        <div class="modal-content">
            <h3>–ó–º—ñ–Ω–∏—Ç–∏ —á–∞—Å</h3>
            <input type="text" id="customTimeInput" placeholder="00:00 - 00:00">
            <div class="modal-actions">
                <button id="saveTimeBtn">–û–ö</button>
                <button onclick="document.getElementById('timeModal').style.display='none'">–°–∫–∞—Å—É–≤–∞—Ç–∏</button>
            </div>
        </div>
    </div>

    <div id="roomChoiceModal" class="modal">
        <div class="modal-content">
            <h3>–û–±–µ—Ä—ñ—Ç—å –≤–∞—Ä—ñ–∞–Ω—Ç</h3>
            <div id="roomChoicesList" class="room-choices-grid"></div>
            <button onclick="document.getElementById('roomChoiceModal').style.display='none'" style="margin-top:10px;">–°–∫–∞—Å—É–≤–∞—Ç–∏</button>
        </div>
    </div>

    <script src="./editor.js"></script>
</body>
</html>
